<div
  class="textarea-wrapper"
  [class.length-indicator-enabled]="showLengthIndicator">
  @if (mask) {
    <!-- NgxMaskDirective only when mask exists -->
    <textarea
      #maskedTextareaRef
      class="field"
      [id]="fieldId"
      [placeholder]="placeholder"
      [attr.name]="name"
      [attr.autocomplete]="autocomplete"
      [attr.minlength]="minLength > -1 ? minLength : null"
      [attr.maxlength]="maxLength > -1 ? maxLength : null"
      [attr.readonly]="readonly ? '' : null"
      [attr.disabled]="disabled ? '' : null"
      [attr.tabindex]="readonly || disabled ? -1 : null"
      [mask]="mask"
      [validation]="!!mask && mergedMaskConfig.validation && !readonly && !disabled"
      [showMaskTyped]="mergedMaskConfig.showMaskTyped"
      [dropSpecialCharacters]="mergedMaskConfig.dropSpecialCharacters"
      [specialCharacters]="mergedMaskConfig.specialCharacters"
      [thousandSeparator]="mergedMaskConfig.thousandSeparator"
      [decimalMarker]="mergedMaskConfig.decimalMarker"
      [prefix]="mergedMaskConfig.prefix"
      [suffix]="mergedMaskConfig.suffix"
      [allowNegativeNumbers]="mergedMaskConfig.allowNegativeNumbers"
      [leadZeroDateTime]="mergedMaskConfig.leadZeroDateTime"
      [patterns]="mergedMaskConfig.patterns"
      [clearIfNotMatch]="mergedMaskConfig.clearIfNotMatch"
      (input)="onValueChange()"
      (focus)="onFocusChange(true)"
      (blur)="onFocusChange(false)">
    </textarea>
  } @else {
    <textarea
      #plainTextareaRef
      class="field"
      [id]="fieldId"
      [placeholder]="placeholder"
      [attr.name]="name"
      [attr.autocomplete]="autocomplete"
      [attr.minlength]="minLength > -1 ? minLength : null"
      [attr.maxlength]="maxLength > -1 ? maxLength : null"
      [attr.readonly]="readonly ? '' : null"
      [attr.disabled]="disabled ? '' : null"
      [attr.tabindex]="readonly || disabled ? -1 : null"
      (input)="onValueChange()"
      (focus)="onFocusChange(true)"
      (blur)="onFocusChange(false)">
    </textarea>
  }

  @if (showLengthIndicator && !readonly && !disabled) {
    <div
      #lengthIndicatorRef
      class="length-indicator">
      {{ value?.length || 0 }}<ng-container *ngIf="maxLength > -1"> / {{ maxLength }}</ng-container>
    </div>
  }
</div>
