<div
  #dateRef
  class="field"
  [class.is-readonly]="readonly"
  [class.is-disabled]="disabled"
  [class.focused]="isFieldFocused">
  <div class="input-wrapper">
    <!-- Input Field -->
    <input
      #inputRef
      type="text"
      autocomplete="off"
      class="wrapped-input"
      [mask]="ngxMask"
      [showMaskTyped]="ngxMaskConfig.showMaskTyped || false"
      [leadZeroDateTime]="ngxMaskConfig.leadZeroDateTime || false"
      [dropSpecialCharacters]="ngxMaskConfig.dropSpecialCharacters || true"
      [id]="fieldId"
      [placeholder]="placeholder"
      [attr.name]="name"
      [attr.readonly]="readonly ? '' : null"
      [attr.disabled]="disabled ? '' : null"
      [attr.tabindex]="readonly || disabled ? -1 : null"
      (input)="onValueChange()"
      (focus)="onFocusChange(true)"
      (blur)="onFocusChange(false)" />

    <!-- Toggle -->
    @if (!readonly && !disabled) {
      <formidable-icon
        #toggleRef
        class="toggle-background"
        [class.open]="isPanelOpen"
        [svg]="isPanelOpen ? toggleIconOpen : toggleIconClosed"
        [size]="32"
        (mousedown)="toggleMouseDown($event)" />
    }
  </div>

  <!-- Panel -->
  <div
    #panelRef
    tabindex="-1"
    class="panel panel-{{ panelPosition }}"
    [class.open]="isPanelOpen"
    (mousedown)="panelMouseDown($event)">
    <div class="panel-scrollcontainer">
      <div class="picker-wrapper">
        <!-- Date Picker -->
        <div #pickerRef></div>
      </div>
    </div>
  </div>
</div>
