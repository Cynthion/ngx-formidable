<select
  #selectRef
  class="field"
  [id]="fieldId"
  [attr.name]="name"
  [attr.readonly]="readonly ? '' : null"
  [attr.disabled]="disabled ? '' : null"
  [attr.tabindex]="readonly || disabled ? -1 : null"
  (pointerdown)="readonly || disabled ? preventPointerDown($event) : null"
  (keydown)="readonly || disabled ? preventKeydown($event) : null"
  (change)="onValueChange()"
  (focus)="onFocusChange(true)"
  (blur)="onFocusChange(false)">
  <!-- Placeholder -->
  @if (placeholder && !value) {
    <option
      value=""
      disabled
      selected>
      {{ placeholder }}
    </option>
  }

  <!-- Options -->
  <!-- Options are re-created in order to use native <option> elements. -->
  @for (option of options$ | async; track option.value) {
    <option
      [value]="option.value"
      [disabled]="option.disabled || false"
      [selected]="option.value === value">
      {{ option.label || option.value }}
    </option>
  } @empty {
    <option
      [value]=""
      [label]="noOptionsText"
      [disabled]="true">
      {{ noOptionsText }}
    </option>
  }
</select>
