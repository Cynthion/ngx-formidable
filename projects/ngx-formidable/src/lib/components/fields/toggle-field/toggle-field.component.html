<div
  #toggleRef
  role="switch"
  class="field"
  [class.is-readonly]="readonly"
  [class.is-disabled]="disabled"
  [class.focused]="isFieldFocused"
  [class.checked]="value"
  [tabindex]="readonly || disabled ? -1 : null"
  (focus)="onFocusChange(true)"
  (blur)="onFocusChange(false)"
  (click)="onToggleClick($event)">
  <input
    hidden
    type="checkbox"
    [id]="fieldId"
    [tabindex]="-1"
    [attr.name]="name"
    [attr.readonly]="readonly ? '' : null"
    [attr.disabled]="disabled ? '' : null"
    [checked]="value" />

  @if (labelPosition === 'before') {
    <ng-container [ngTemplateOutlet]="label" />
  }

  <div class="toggle-track">
    <div class="toggle-thumb"></div>
  </div>

  @if (labelPosition === 'after') {
    <ng-container [ngTemplateOutlet]="label" />
  }
</div>

<ng-template #label>
  <div class="toggle-label toggle-label-{{ labelPosition }}">
    <ng-container *ngIf="internalLabel; else projectedLabel">
      {{ internalLabel }}
    </ng-container>

    <ng-template #projectedLabel>
      <ng-content></ng-content>
    </ng-template>
  </div>
</ng-template>
