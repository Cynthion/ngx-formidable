<div
  #radioGroupRef
  role="radiogroup"
  class="field"
  [tabindex]="disabled ? -1 : 0"
  [class.is-readonly]="readonly"
  [class.is-disabled]="disabled"
  (focus)="onFocusChange(true)"
  (blur)="onFocusChange(false)">
  <!-- Options -->
  <!-- Options are re-created in order to use native <input> elements. -->
  @for (option of options$ | async; track option.value; let i = $index) {
    <input
      hidden
      type="radio"
      [id]="name + '-' + option.value"
      [tabindex]="-1"
      [attr.name]="name"
      [attr.readonly]="option.readonly || readonly ? '' : null"
      [attr.disabled]="option.disabled || disabled ? '' : null"
      [checked]="option.value === value" />
    <formidable-field-option
      #optionRef
      [layout]="'radio-group'"
      [value]="option.value"
      [label]="option.label"
      [readonly]="option.readonly || readonly"
      [disabled]="option.disabled || disabled"
      [selected]="option.value === value"
      [highlighted]="i === (highlightedOptionIndex$ | async)">
      <ng-container
        *ngIf="option.template; else labelContent"
        [ngTemplateOutlet]="option.template">
      </ng-container>
      <ng-template #labelContent>{{ option.label || option.value }}</ng-template>
    </formidable-field-option>
  } @empty {
    <input
      type="radio"
      [id]="name + '-' + emptyOption.value"
      [tabindex]="-1"
      [name]="name"
      [value]="emptyOption.value"
      [disabled]="emptyOption.disabled || disabled" />
    <formidable-field-option
      #optionRef
      [layout]="'radio-group'"
      [value]="emptyOption.value"
      [label]="emptyOption.label"
      [readonly]="true"
      [disabled]="true">
      {{ emptyOption.label || emptyOption.value }}
    </formidable-field-option>
  }
</div>
