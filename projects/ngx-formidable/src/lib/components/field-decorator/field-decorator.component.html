<!-- Before -->
<div
  class="before-wrapper"
  [class.hidden]="!hasLabel && !hasTooltip">
  <!-- Label -->
  <ng-container [ngTemplateOutlet]="label"></ng-container>
  <!-- Tooltip -->
  <ng-container [ngTemplateOutlet]="tooltip"></ng-container>
</div>

<div ngClass="container-{{ decoratorLayout }}">
  <!-- Prefix -->
  <ng-container [ngTemplateOutlet]="prefix"></ng-container>

  <!-- Content -->
  <ng-container [ngTemplateOutlet]="content"></ng-container>

  <!-- Suffix -->
  <ng-container [ngTemplateOutlet]="suffix"></ng-container>
</div>

<!-- Label Template -->
<ng-template #label>
  @switch (decoratorLayout) {
    @case ('single') {
      <label
        class="label-wrapper"
        [class.hidden]="!hasLabel"
        [class.floating]="isLabelFloating"
        [attr.for]="fieldId">
        <ng-container [ngTemplateOutlet]="projectedLabel"></ng-container>
      </label>
    }
    @case ('group') {
      <div
        class="label-wrapper"
        [class.hidden]="!hasLabel"
        [class.floating]="isLabelFloating">
        <ng-container [ngTemplateOutlet]="projectedLabel"></ng-container>
      </div>
    }
  }

  <ng-template #projectedLabel>
    <ng-content select="[formidableFieldLabel]"></ng-content>
  </ng-template>
</ng-template>

<!-- Tooltip Template -->
<ng-template #tooltip>
  <div
    class="tooltip-wrapper"
    [class.hidden]="!hasTooltip">
    <ng-content select="[formidableFieldTooltip]"></ng-content>
  </div>
</ng-template>

<!-- Content Template -->
<ng-template #content>
  @switch (decoratorLayout) {
    @case ('single') {
      <ng-container [ngTemplateOutlet]="projectedContent"></ng-container>
    }
    @case ('group') {
      <fieldset class="fieldset">
        <legend class="legend">{{ name }}</legend>

        <ng-container [ngTemplateOutlet]="projectedContent"></ng-container>
      </fieldset>
    }
  }
</ng-template>

<!-- Prefix Template -->
<ng-template #prefix>
  <div
    #prefixWrapperRef
    ngClass="prefix-wrapper-{{ decoratorLayout }}"
    [class.hidden]="!hasPrefix">
    <ng-content select="[formidableFieldPrefix]"></ng-content>
  </div>
</ng-template>

<!-- Suffix Template -->
<ng-template #suffix>
  <div
    #suffixWrapperRef
    ngClass="suffix-wrapper-{{ decoratorLayout }}"
    [class.hidden]="!hasSuffix">
    <ng-content select="[formidableFieldSuffix]"></ng-content>
  </div>
</ng-template>

<!-- Projected Content Template -->
<ng-template #projectedContent>
  <ng-content></ng-content>
</ng-template>
