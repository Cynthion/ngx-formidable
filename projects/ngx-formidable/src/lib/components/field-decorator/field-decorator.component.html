<!-- Before -->
@if (decoratorLayout !== 'inline') {
  <div
    class="before-wrapper"
    [class.hidden]="!hasLabel && !hasTooltip">
    <ng-container [ngTemplateOutlet]="labelTooltip" />
  </div>
}

<!-- Layout -->
<div ngClass="container-{{ decoratorLayout }}">
  @if (decoratorLayout === 'inline') {
    <ng-container [ngTemplateOutlet]="labelTooltip" />
  }

  <!-- Prefix -->
  <ng-container [ngTemplateOutlet]="prefix" />

  <!-- Content -->
  <ng-container [ngTemplateOutlet]="content" />

  <!-- Suffix -->
  <ng-container [ngTemplateOutlet]="suffix" />
</div>

<!-- Label & Tooltip Template -->
<ng-template #labelTooltip>
  <div class="label-tooltip-wrapper">
    <!-- Label -->
    <ng-container [ngTemplateOutlet]="label" />
    <!-- Tooltip -->
    <ng-container [ngTemplateOutlet]="tooltip" />
  </div>
</ng-template>

<!-- Label Template -->
<ng-template #label>
  @if (decoratorLayout === 'group') {
    <div
      class="label-wrapper"
      [class.hidden]="!hasLabel"
      [class.floating]="isLabelFloating">
      <ng-container [ngTemplateOutlet]="projectedLabel" />
    </div>
  } @else {
    <label
      class="label-wrapper"
      [class.hidden]="!hasLabel"
      [class.floating]="isLabelFloating"
      [attr.for]="fieldId">
      <ng-container [ngTemplateOutlet]="projectedLabel" />
    </label>
  }

  <ng-template #projectedLabel>
    <ng-content select="[formidableFieldLabel]" />
  </ng-template>
</ng-template>

<!-- Tooltip Template -->
<ng-template #tooltip>
  <div
    class="tooltip-wrapper"
    [class.hidden]="!hasTooltip">
    <ng-content select="[formidableFieldTooltip]"></ng-content>
  </div>
</ng-template>

<!-- Content Template -->
<ng-template #content>
  @if (decoratorLayout === 'group') {
    <fieldset class="fieldset">
      <legend class="legend">{{ name }}</legend>

      <ng-container [ngTemplateOutlet]="projectedContent" />
    </fieldset>
  } @else {
    <ng-container [ngTemplateOutlet]="projectedContent" />
  }
</ng-template>

<!-- Prefix Template -->
<ng-template #prefix>
  <div
    #prefixWrapperRef
    ngClass="prefix-wrapper-{{ decoratorLayout }}"
    [class.hidden]="!hasPrefix">
    <ng-content select="[formidableFieldPrefix]"></ng-content>
  </div>
</ng-template>

<!-- Suffix Template -->
<ng-template #suffix>
  <div
    #suffixWrapperRef
    ngClass="suffix-wrapper-{{ decoratorLayout }}"
    [class.hidden]="!hasSuffix">
    <ng-content select="[formidableFieldSuffix]" />
  </div>
</ng-template>

<!-- Projected Content Template -->
<ng-template #projectedContent>
  <ng-content />
</ng-template>
