<div
  #radioGroupRef
  tabindex="0"
  role="radiogroup"
  class="field"
  (focus)="onFocusChange(true)"
  (blur)="onFocusChange(false)">
  <!-- Inline Options -->
  @for (option of inlineOptions$ | async; track option.value; let i = $index) {
    <input
      hidden
      type="radio"
      [id]="option.value"
      [tabindex]="-1"
      [attr.name]="name"
      [attr.disabled]="option.disabled || disabled ? '' : null"
      [required]="required"
      [checked]="option.value === value"
      (change)="onOptionChangeChange(option)" />
    <formz-field-option
      [layout]="'radio-group'"
      [value]="option.value"
      [label]="option.label"
      [disabled]="option.disabled || disabled"
      [selected]="option.value === value"
      [highlighted]="i === highlightedIndex">
      {{ option.label || option.value }}
    </formz-field-option>
  }

  <!-- Content Projected Options -->
  <!-- Options are re-created in order to use native <input> elements. -->
  @for (option of projectedOptions$ | async; track option.value; let i = $index) {
    <input
      hidden
      type="radio"
      [id]="option.value"
      [tabindex]="-1"
      [attr.name]="name"
      [attr.disabled]="option.disabled || disabled ? '' : null"
      [required]="required"
      [checked]="option.value === value"
      (change)="onOptionChangeChange(option)" />
    <formz-field-option
      [layout]="'radio-group'"
      [value]="option.value"
      [label]="option.label"
      [disabled]="option.disabled || disabled"
      [selected]="option.value === value"
      [highlighted]="i === highlightedIndex - inlineOptions$.value.length">
      <ng-container *ngTemplateOutlet="option.template ?? null"></ng-container>
    </formz-field-option>
  }

  <!-- Empty Option -->
  @if (inlineOptions$.value.length === 0 && projectedOptions$.value.length === 0) {
    <label>
      <input
        type="radio"
        [id]="emptyOption.value"
        [tabindex]="-1"
        [name]="name"
        [value]="emptyOption.value"
        [disabled]="emptyOption.disabled || disabled" />
      <formz-field-option
        [layout]="'radio-group'"
        [value]="emptyOption.value"
        [label]="emptyOption.label"
        [disabled]="true">
        {{ emptyOption.label || emptyOption.value }}
      </formz-field-option>
    </label>
  }
</div>
