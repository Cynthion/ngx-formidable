<div
  #autocompleteRef
  tabindex="0"
  class="field"
  [class.open]="isOpen">
  <!-- Input Field -->
  <input
    #inputRef
    type="text"
    class="wrapped-input"
    [id]="fieldId"
    [placeholder]="placeholder"
    [attr.name]="name"
    [attr.disabled]="disabled ? '' : null"
    [required]="required"
    (input)="onInputChange()"
    (focus)="onFocusChange(true)"
    (blur)="onFocusChange(false)" />

  <!-- Backdrop -->
  <div
    *ngIf="isOpen && enableBackdrop"
    class="backdrop"
    (click)="togglePanel(false)"></div>

  <!-- Panel -->
  <div
    *ngIf="isOpen"
    #panelRef
    class="panel">
    <!-- Inline Options -->
    @for (option of options; track option.value; let i = $index) {
      <formz-field-option
        [value]="option.value"
        [label]="option.label"
        [class.highlighted]="i === highlightedIndex">
        {{ option.label }}
      </formz-field-option>
    }
    <!-- Content Projected Options -->
    <ng-content></ng-content>
  </div>
</div>
